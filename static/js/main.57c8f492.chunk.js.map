{"version":3,"sources":["components/app/logo.png","components/ticket/ticket.js","components/tickets/tickets.js","utils/utils.js","components/app/App.js","index.js"],"names":["module","exports","Ticket","props","price","carrier","origin1","origin2","destination1","destination2","date1","date2","stops1","stops2","duration1","duration2","key","uniqueId","src","alt","length","Timer","state","searchId","tickets","stop","filtered","noStops","oneStop","twoStops","threeStops","allStops","onTicketsLoad","axios","get","then","response","setState","data","onSortByChipest","catch","onSortByFastest","prevState","sort","first","second","segments","duration","onNoStopsCheck","evt","target","checked","onOneStopCheck","onTwoStopsCheck","onThreeStopsCheck","onAllStopsCheck","this","ticketsList","arr","numberOfFirstElements","resArray","i","cutArray","filter","ticket","stops","map","origin","destination","date","className","htmlFor","type","id","onClick","React","Component","App","logo","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.57c8f492.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.d2a4807b.png\";","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport uniqueId from 'lodash.uniqueid';\n\nconst Ticket = (props) => {\n  const {\n    price,\n    carrier,\n    origin1,\n    origin2,\n    destination1,\n    destination2,\n    date1,\n    date2,\n    stops1,\n    stops2,\n    duration1,\n    duration2,\n  } = props;\n\n  return (\n    <li key={uniqueId()}>\n      <img src={`//pics.avs.io/99/36/${carrier}.png`} alt={`${carrier}`} />\n      <br />\n      {price}\n      <br />\n      {carrier}\n      <br />\n      {origin1}\n      -\n      {destination1}\n      -\n      {date1}\n      -\n      {duration1}\n      -\n      {stops1.length}\n      <br />\n      {origin2}\n      -\n      {destination2}\n      -\n      {date2}\n      -\n      {duration2}\n      -\n      {stops2.length}\n      <hr />\n    </li>\n  );\n};\n\n\nTicket.propTypes = {\n  price: PropTypes.number.isRequired,\n  carrier: PropTypes.string.isRequired,\n\n  origin1: PropTypes.string.isRequired,\n  origin2: PropTypes.string.isRequired,\n\n  destination1: PropTypes.string.isRequired,\n  destination2: PropTypes.string.isRequired,\n\n  date1: PropTypes.string.isRequired,\n  date2: PropTypes.string.isRequired,\n\n  duration1: PropTypes.number.isRequired,\n  duration2: PropTypes.number.isRequired,\n\n  stops1: PropTypes.array.isRequired,\n  stops2: PropTypes.array.isRequired,\n\n};\n\nexport default Ticket;\n","import React from 'react';\nimport axios from 'axios';\nimport uniqueId from 'lodash.uniqueid';\n\nimport Ticket from '../ticket/ticket';\n\n\nimport { cutArray } from '../../utils/utils';\n\n\nclass Timer extends React.Component {\n  state = {\n    searchId: '',\n    tickets: [],\n    stop: false,\n    filtered: [],\n    noStops: false,\n    oneStop: false,\n    twoStops: false,\n    threeStops: false,\n    allStops: true,\n  };\n\n  componentDidMount() {\n    axios.get('https://front-test.beta.aviasales.ru/search').then((response) => {\n      this.setState({\n        searchId: response.data.searchId,\n      });\n      this.onTicketsLoad();\n    });\n  }\n\n  onTicketsLoad = () => {\n    const { searchId, stop, tickets } = this.state;\n    axios\n      .get(`https://front-test.beta.aviasales.ru/tickets?searchId=${searchId}`)\n      .then((response) => {\n        this.setState({\n          tickets: [...tickets, ...response.data.tickets],\n          filtered: [...tickets, ...response.data.tickets],\n          stop: response.data.stop,\n        });\n        if (!stop) {\n          this.onTicketsLoad();\n          this.onSortByChipest();\n        }\n      })\n      .catch(() => {\n        // console.log('error', error);\n        if (!stop) {\n          this.onTicketsLoad();\n        }\n      });\n  };\n\n  onSortByFastest = () => {\n    this.setState((prevState) => ({\n      filtered: prevState.filtered\n        .sort((first, second) => (first.segments[0].duration + first.segments[1].duration)\n      - (second.segments[0].duration + second.segments[1].duration)),\n    }));\n  }\n\n  onSortByChipest = () => {\n    // filtered.sort((first, second) => first.price - second.price);\n    this.setState((prevState) => ({\n      filtered: prevState.filtered\n        .sort((first, second) => first.price - second.price),\n    }));\n  }\n\n\n  onNoStopsCheck = (evt) => {\n    this.setState({\n      noStops: evt.target.checked,\n    });\n  }\n\n  onOneStopCheck = (evt) => {\n    this.setState({\n      oneStop: evt.target.checked,\n    });\n  }\n\n  onTwoStopsCheck = (evt) => {\n    this.setState({\n      twoStops: evt.target.checked,\n    });\n  }\n\n  onThreeStopsCheck = (evt) => {\n    this.setState({\n      threeStops: evt.target.checked,\n    });\n  }\n\n  onAllStopsCheck = (evt) => {\n    this.setState({\n      allStops: evt.target.checked,\n    });\n  }\n\n\n  render() {\n    const {\n      noStops, oneStop, twoStops, threeStops, allStops, filtered,\n    } = this.state;\n\n    const ticketsFiltered = filtered\n      .filter((ticket) => allStops\n      || (threeStops === true && ticket.segments[0].stops.length === 3)\n      || (twoStops === true && ticket.segments[0].stops.length === 2)\n      || (oneStop === true && ticket.segments[0].stops.length === 1)\n      || (noStops === true && ticket.segments[0].stops.length === 0));\n\n    const ticketsFilteredCutted = cutArray(ticketsFiltered, 5);\n\n\n    const ticketsList = ticketsFilteredCutted.map((ticket) => (\n      <Ticket\n        key={uniqueId()}\n        price={ticket.price}\n        carrier={ticket.carrier}\n        origin1={ticket.segments[0].origin}\n        origin2={ticket.segments[1].origin}\n        destination1={ticket.segments[0].destination}\n        destination2={ticket.segments[1].destination}\n        date1={ticket.segments[0].date}\n        date2={ticket.segments[1].date}\n        stops1={ticket.segments[0].stops}\n        stops2={ticket.segments[1].stops}\n        duration1={ticket.segments[0].duration}\n        duration2={ticket.segments[1].duration}\n\n      />\n    ));\n\n    return (\n\n\n      <div className=\"timer-container\">\n\n        <label htmlFor=\"allStops\">\n          all\n          <input type=\"checkbox\" checked={allStops} id=\"allStops\" onClick={this.onAllStopsCheck} />\n        </label>\n\n        <label htmlFor=\"noStops\">\n          noStops\n          <input type=\"checkbox\" id=\"noStops\" onClick={this.onNoStopsCheck} />\n        </label>\n\n        <label htmlFor=\"oneStop\">\n          1stop\n          <input type=\"checkbox\" id=\"oneStop\" onClick={this.onOneStopCheck} />\n        </label>\n\n        <label htmlFor=\"twoStops\">\n          2stops\n          <input type=\"checkbox\" id=\"twoStops\" onClick={this.onTwoStopsCheck} />\n        </label>\n\n        <label htmlFor=\"threeStops\">\n          3stops\n          <input type=\"checkbox\" id=\"threeStops\" onClick={this.onThreeStopsCheck} />\n        </label>\n\n        <div className=\"display\">\n          <span>{}</span>\n        </div>\n        <button type=\"button\" onClick={this.onSortByFastest}>\n          SortByFastest\n        </button>\n        <button type=\"button\" onClick={this.onSortByChipest}>\n          SortByChipest\n        </button>\n\n\n        <ul>\n          {ticketsList}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default Timer;\n","export const cutArray = (arr, numberOfFirstElements) => {\n  if (arr.length === 0) {\n    return [];\n  }\n  const resArray = [];\n  for (let i = 0; i < numberOfFirstElements; i += 1) {\n    resArray[i] = arr[i];\n  }\n  return resArray;\n};\n\nexport const nulled = () => null;\n","import React from 'react';\nimport logo from './logo.png';\nimport './App.scss';\nimport Tickets from '../tickets/tickets';\n\n\nconst App = () => (\n  <div className=\"App\">\n    <header className=\"App-header\">\n      <img src={logo} className=\"App-logo\" alt=\"logo\" />\n    </header>\n    <Tickets />\n\n\n  </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/app/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}